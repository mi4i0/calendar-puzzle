<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calendar Puzzle Visualizer</title>
    <style>
      :root {
        font-family: "Segoe UI", system-ui, -apple-system, sans-serif;
        background: #0f172a;
        color: #f8fafc;
      }

      body {
        margin: 0;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 32px;
      }

      .app {
        width: min(1200px, 100%);
        display: flex;
        flex-direction: column;
        gap: 24px;
        background: rgba(15, 23, 42, 0.8);
        border: 1px solid rgba(148, 163, 184, 0.2);
        border-radius: 18px;
        padding: 32px;
        box-shadow: 0 30px 80px rgba(15, 23, 42, 0.6);
      }

      h1 {
        margin: 0;
        font-size: clamp(1.8rem, 4vw, 2.4rem);
        font-weight: 600;
      }

      h2 {
        margin: 0 0 8px;
        font-size: 1rem;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: #cbd5f5;
      }

      .status {
        font-size: 0.95rem;
        color: #cbd5f5;
      }

      .status.muted {
        color: #94a3b8;
      }

      .status.success {
        color: #4ade80;
      }

      .status.error {
        color: #f87171;
      }

      .status.pending {
        color: #fde047;
      }

      .status.selection {
        font-weight: 600;
      }

      .controls {
        display: flex;
        flex-direction: column;
        gap: 16px;
        padding: 20px;
        border-radius: 16px;
        border: 1px solid rgba(148, 163, 184, 0.2);
        background: rgba(15, 23, 42, 0.65);
      }

      .control-grid {
        display: grid;
        gap: 12px;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      }

      .control {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .control label {
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: #94a3b8;
      }

      select {
        border-radius: 10px;
        border: 1px solid rgba(148, 163, 184, 0.4);
        padding: 10px;
        background: rgba(15, 23, 42, 0.8);
        color: inherit;
        font-size: 0.95rem;
        outline: none;
      }

      .control-actions {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
      }

      button {
        border: none;
        border-radius: 999px;
        padding: 10px 22px;
        font-size: 0.95rem;
        font-weight: 600;
        cursor: pointer;
        background: #38bdf8;
        color: #0f172a;
        transition: opacity 80ms ease;
      }

      button.secondary {
        background: rgba(148, 163, 184, 0.3);
        color: #f8fafc;
      }

      button:hover {
        opacity: 0.9;
      }

      .board {
        display: grid;
        gap: 6px;
        background: rgba(15, 23, 42, 0.5);
        padding: 16px;
        border-radius: 14px;
        border: 1px solid rgba(148, 163, 184, 0.25);
      }

      .cell {
        background: rgba(15, 23, 42, 0.7);
        border-radius: 10px;
        padding: 10px;
        display: flex;
        flex-direction: column;
        gap: 6px;
        border: 1px solid rgba(148, 163, 184, 0.25);
        min-height: 70px;
        transition: transform 120ms ease, border-color 120ms ease;
      }

      .cell:hover {
        transform: translateY(-2px);
        border-color: rgba(248, 250, 252, 0.6);
      }

      .cell.highlighted {
        border-color: #f8fafc;
        box-shadow: 0 0 0 2px rgba(248, 250, 252, 0.6);
        transform: translateY(-3px);
      }

      .cell.must-cover {
        border: 1px dashed #fde047;
      }

      .cell.forbidden {
        background: repeating-linear-gradient(
          135deg,
          rgba(248, 113, 113, 0.2),
          rgba(248, 113, 113, 0.2) 8px,
          rgba(15, 23, 42, 0.9) 8px,
          rgba(15, 23, 42, 0.9) 16px
        );
      }

      .label {
        font-size: 0.85rem;
        letter-spacing: 0.03em;
        text-transform: uppercase;
        color: #cbd5f5;
      }

      .piece-mark {
        font-size: 1.1rem;
        font-weight: 600;
      }

      .legend,
      .placements {
        display: grid;
        gap: 10px;
      }

      .legend-grid {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
      }

      .legend-item {
        padding: 6px 12px;
        border-radius: 999px;
        font-size: 0.9rem;
        font-weight: 600;
        color: #0f172a;
        transition: transform 120ms ease, box-shadow 120ms ease;
      }

      .legend-item.highlighted {
        transform: translateY(-2px);
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.35);
      }

      .placements {
        border-top: 1px solid rgba(148, 163, 184, 0.2);
        padding-top: 12px;
      }

      .placement-entry {
        font-family: "Fira Mono", Consolas, monospace;
        font-size: 0.9rem;
        color: #cbd5f5;
        padding: 4px 8px;
        border-radius: 8px;
      }

      .placement-entry.highlighted {
        background: rgba(56, 189, 248, 0.12);
      }

      @media (max-width: 768px) {
        body {
          padding: 16px;
        }

        .board {
          grid-template-columns: repeat(3, minmax(80px, 1fr)) !important;
        }
      }
    </style>
  </head>
  <body>
    <main class="app">
      <div>
        <h1>Calendar Puzzle Visualizer</h1>
        <p class="status muted">
          Solve directly in your browser or import a <code>solution.json</code> from the Python
          solver.
        </p>
      </div>

      <section class="controls">
        <div class="control-grid">
          <div class="control">
            <label for="month-select">Month</label>
            <select id="month-select"></select>
          </div>
          <div class="control">
            <label for="day-select">Day</label>
            <select id="day-select"></select>
          </div>
          <div class="control">
            <label for="weekday-select">Weekday</label>
            <select id="weekday-select"></select>
          </div>
        </div>
        <div class="control-actions">
          <button id="solve-js">Solve (JS)</button>
          <button id="load-json" class="secondary">Load solution.json</button>
        </div>
        <p id="status-text" class="status">Pick a date and click Solve.</p>
        <p id="selection-label" class="status selection">Selected: JAN / 1 / MON</p>
      </section>

      <section>
        <h2>Board</h2>
        <div id="board" class="board" aria-live="polite"></div>
      </section>

      <section class="legend">
        <h2>Pieces</h2>
        <div id="legend" class="legend-grid"></div>
      </section>

      <section class="placements">
        <h2>Placements</h2>
        <div id="placements"></div>
      </section>
    </main>

    <script type="module" src="visualizer.js"></script>
  </body>
</html>